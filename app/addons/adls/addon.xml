<?xml version="1.0"?>
<addon scheme="3.0">
    <id>adls</id>
    <version>0.1.45</version>
    <priority>1010111</priority>
    <position>0</position>
    <status>active</status>
    <has_icon>Y</has_icon>
    <default_language>en</default_language>
    <queries>
        <item for="install">
            CREATE TABLE `?:adls_licenses` (
                `license_id`  mediumint(8) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `order_id`  mediumint(8) NOT NULL ,
                `product_id`  mediumint(8) UNSIGNED NOT NULL ,
                `order_item_id`  int(11) UNSIGNED NULL,
                `user_id`  mediumint(8) UNSIGNED NOT NULL ,
                `created_at`  datetime NOT NULL ,
                `updated_at`  datetime NOT NULL ,
                `license_key`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `status`  char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                PRIMARY KEY (`license_id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">
            CREATE TABLE `?:adls_license_domains` (
                `domain_id` mediumint(8) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `license_id`  mediumint(8) UNSIGNED NOT NULL ,
                `domain`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `created_at`  datetime NOT NULL ,
                `updated_at`  datetime NOT NULL ,
                `status`  char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
            PRIMARY KEY (`domain_id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">
            CREATE TABLE `?:adls_logs` (
                `log_id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `type`  char(1) NOT NULL ,
                `object_type`  varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `object_action`  varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `timestamp`  int(11) UNSIGNED NOT NULL ,
                `user_id`  mediumint(8) UNSIGNED NULL ,
                `ip`  varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `hostname`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `country`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `content`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `backtrace`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                PRIMARY KEY (`log_id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">ALTER TABLE `?:products` ADD `adls_subscription_id` smallint(2) NOT NULL;</item>
        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_subscription_id`;</item>
        <item for="install">ALTER TABLE `?:products` ADD `adls_addon_id` VARCHAR(64) NOT NULL;</item>
        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_addon_id`;</item>
        <item for="install">ALTER TABLE `?:product_options` ADD `adls_option_type` VARCHAR(64) NOT NULL;</item>
        <item for="___uninstall">ALTER TABLE `?:product_options` DROP `adls_option_type`;</item>

    </queries>
    <settings edition_type="ROOT">
        <sections>
            <section id="general">
                <items>
                    <item id="email">
                        <type>input</type>
                    </item>
                    <item id="password">
                        <type>password</type>
                    </item>
                    <item id="info">
                        <type>info</type>
                        <handler>fn_sidekick_info,adls</handler>
                    </item>
                </items>
            </section>
        </sections>
    </settings>
    <compatibility>
        <dependencies>sidekick</dependencies>
        <core_version>
            <min>4.2.1</min>
        </core_version>
    </compatibility>
    <authors>
        <author>
            <name>HELOstore</name>
            <email>contact@helostore.com</email>
            <url>https://helostore.com</url>
        </author>
    </authors>
</addon>
