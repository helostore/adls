<?xml version="1.0"?>
<addon scheme="3.0">
    <id>adls</id>
    <version>0.1.75</version>
    <priority>1010111</priority>
    <position>0</position>
    <status>active</status>
    <has_icon>Y</has_icon>
    <default_language>en</default_language>
    <queries>
        <item for="install">
            CREATE TABLE `?:adls_licenses` (
                `id`  mediumint(8) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `orderId`  mediumint(8) NOT NULL ,
                `productId`  mediumint(8) UNSIGNED NOT NULL ,
                `orderItemId`  int(11) UNSIGNED NULL,
                `userId`  mediumint(8) UNSIGNED NOT NULL ,
                `createdAt`  datetime NOT NULL ,
                `updatedAt`  datetime NOT NULL ,
                `licenseKey`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `status`  char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                PRIMARY KEY (`id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">
            CREATE TABLE `?:adls_license_domains` (
                `id` mediumint(8) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `licenseId`  mediumint(8) UNSIGNED NOT NULL ,
                `name`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `type`  char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `createdAt`  datetime NOT NULL ,
                `updatedAt`  datetime NOT NULL ,
                `status`  char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `productOptionId`  mediumint(8) UNSIGNED NULL ,
            PRIMARY KEY (`id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">
            CREATE TABLE `?:adls_logs` (
                `id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
                `type`  char(1) NOT NULL ,
                `objectType`  varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `objectAction`  varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
                `timestamp`  int(11) UNSIGNED NOT NULL ,
                `userId`  mediumint(8) UNSIGNED NULL ,
                `ip`  varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `hostname`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `country`  varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `content`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                `backtrace`  text CHARACTER SET utf8 COLLATE utf8_general_ci NULL ,
                PRIMARY KEY (`id`)
            ) ENGINE=MyISAM DEFAULT CHARSET UTF8;
        </item>
        <item for="install">
            CREATE TABLE `?:adls_releases` (
                `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
                `productId` mediumint(8) unsigned NOT NULL,
                `createdAt` datetime NOT NULL,
                `version` varchar(16) NOT NULL,
                `fileName` varchar(255) NOT NULL,
                `fileSize` int(11) unsigned NOT NULL,
                PRIMARY KEY (`id`)
            )
        </item>

        <item for="install">ALTER TABLE `?:products` ADD `adls_subscription_id` smallint(2);</item>
        <item for="install">ALTER TABLE `?:products` ADD `adls_addon_id` VARCHAR(64);</item>
        <item for="install">ALTER TABLE `?:products` ADD `adls_release_date` INT(11);</item>
        <item for="install">ALTER TABLE `?:products` ADD `adls_release_version` VARCHAR(16);</item>
        <item for="install">ALTER TABLE `?:product_options` ADD `adls_option_type` VARCHAR(64);</item>

        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_subscription_id`;</item>
        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_addon_id`;</item>
        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_release_date`;</item>
        <item for="___uninstall">ALTER TABLE `?:products` DROP `adls_release_version`;</item>
        <item for="___uninstall">ALTER TABLE `?:product_options` DROP `adls_option_type`;</item>

    </queries>
    <settings edition_type="ROOT">
        <sections>
            <section id="general">
                <items>
                    <item id="email">
                        <type>input</type>
                    </item>
                    <item id="password">
                        <type>password</type>
                    </item>
                    <item id="info">
                        <type>info</type>
                        <handler>fn_sidekick_info,adls</handler>
                    </item>
                </items>
            </section>
        </sections>
    </settings>
    <compatibility>
        <dependencies>sidekick</dependencies>
        <core_version>
            <min>4.2.1</min>
        </core_version>
    </compatibility>
    <authors>
        <author>
            <name>HELOstore</name>
            <email>contact@helostore.com</email>
            <url>https://helostore.com</url>
        </author>
    </authors>
</addon>
